---
layout: default
---

方程(3.26)表明,对至少一类包含$\lfloor \rfloor$的和式有可能得到封闭形式.
所以我们尝试着求和式:

$$
\sum _{0 \leqslant k < n}\lfloor \sqrt k\rfloor
$$
##### 方法一
一种想法是引入变量$m=\lfloor \sqrt k\rfloor$来简单地处理这个问题
书上的例题又一次用了<font color=scarlet>高超的处理手法</font>来计算这个和式

$$
\begin{aligned}
\sum _{0 \leqslant k < n}\lfloor \sqrt k\rfloor &= \sum _{k,m \geqslant 0}m[ k < n ][m=\lfloor \sqrt k\rfloor]\\
&=\sum _{k,m \geqslant 0}m[ k < n ][m \leqslant \sqrt k < m+1]\\
&=\sum _{k,m \geqslant 0}m[ k < n ][m^2 \leqslant k < (m+1)^2]\\
\\&{\footnotesize //(m+1)^2有可能\leqslant n , 也有可能大于n.所以把两种情况分开统计}\\
&=\sum _{k,m \geqslant 0}m[m^2 \leqslant k < (m+1)^2 \leqslant n] \\
&+ \sum _{k,m \geqslant 0}m[m^2 \leqslant k < n < (m+1)^2]
\end{aligned}
$$

<font color=scarlet>高超的处理手法</font>从这里开始,先假设$n=a^2$是一个完全平方,这样第二个和式就等于零. 然后再求$a=\lfloor \sqrt x \rfloor$的值,再将两者相加.

第一步,先求$n=a^2$是一个完全平方,第二个和式是0:

$$
\begin{aligned}
&=\sum _{k,m \geqslant 0}m[m^2 \leqslant k < (m+1)^2 \leqslant n] \\
&+ 0\\
&=\sum _{k,m \geqslant 0}m[m^2 \leqslant k < (m+1)^2 \leqslant a^2]\\
&=\sum _{m \geqslant 0}m[m^2 < (m+1)^2 \leqslant a^2] \sum _{k \leqslant m^2}m\\
&=\sum _{m \geqslant 0}m[m^2 < (m+1)^2 \leqslant a^2] \sum _{k =m^2}m,\cdots{\footnotesize因为m=\lfloor \sqrt k\rfloor}\\
&=\sum _{m \geqslant 0}((m+1)^2 - m^2) [m+1 \leqslant a] \sum _{k =m^2}m\\
&=\sum _{m \geqslant 0}m(2m+1) [m < a]\\
&=\sum _{m \geqslant 0}(2m^2+m) [m < a]\\
&=\sum _{m \geqslant 0}(2m^2-2m+3m) [m < a]\cdots{\footnotesize  O,MY God, 这样也能行,怎么想到的? }\\
&=\sum _{m \geqslant 0}(2(m^2-m)+3m) [m < a]\\
&=\sum _{m \geqslant 0}(2m^{\underline{2} }+3m^{\underline {1} }) [m < a]\\
&=\textstyle{\sum_0^a}(2m^{\underline{2} }+3m^{\underline {1} }) \delta m\\
&= { {2} \over {3} } a(a-1)(a-2) + { {3} \over {2} } a(a-1)\\
&= {1 \over 6} (4a+1)a(a-1)
\end{aligned}
$$

第二步,再求$a=\lfloor \sqrt n \rfloor$, <font color=scarlet>不需要计算上述的第二个和式</font>, 直接计算

$$
\begin{aligned}
&\sum _{0 \leqslant k < n}\lfloor \sqrt k\rfloor \\
&= \sum_{0 \leqslant k < n} a [a^2 \leqslant k < n ]\\
&=a(n-a^2)
\end{aligned}
$$

故:

$$
\tag {3.27}
\begin{aligned}
\sum _{0 \leqslant k < n}\lfloor \sqrt k\rfloor
&={1 \over 6} (4a+1)a(a-1) + a(n-a^2), a=\lfloor \sqrt n \rfloor\\
&=na-{1\over 3} a^3 - {1\over 2 }a^2 - {1 \over 6} a, a= \lfloor \sqrt n \rfloor
\end{aligned}
$$
##### 方法二
 求解$\displaystyle {\sum _{0 \leqslant k < n}\lfloor \sqrt k\rfloor} $, 的另一个方法是用$\sum_j [ 1 \leqslant j \leqslant x]$代替形如$\lfloor x \rfloor$的表达式, 只要$x \geqslant 0$

$$
\begin{aligned}
 \sum _{0 \leqslant k < n}\lfloor \sqrt k\rfloor &= \sum _{j,k}[1 \leqslant j \leqslant \sqrt k][0 \leqslant k < a^2]\\
 &=\sum_{1\leqslant j < a} \sum_k [j^2 \leqslant k < a^2]\\
 &=\sum_{1 \leqslant j < a} (a^2-j^2) = a^3 - {1 \over 3}a \left (a + {1 \over 2}\right )(a+1)
\end{aligned}
 $$

无理数$α$的整数倍的小数部分均匀分布在(0,1)之间

$$
\tag{3.28}
\lim_{n \to \infty } {1 \over n} \sum_{0 \leqslant k < n}f(\lbrace k a \rbrace) = \int^1_0f(x)dx
$$


